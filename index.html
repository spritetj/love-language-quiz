<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#f8bbd9">
    <meta name="format-detection" content="telephone=no">
    <title>The 5 Love Languages Quiz | HAAB</title>
    <meta name="description" content="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Love Language ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì! ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&display=swap" rel="stylesheet">
    <style>
        :root { --pink-light: #fce4ec; --pink-main: #f8bbd9; --pink-dark: #e91e63; --gold: #d4af37; --gold-light: #f0d77c; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        html, body { height: 100%; }
        body { font-family: 'Prompt', sans-serif; min-height: 100vh; min-height: -webkit-fill-available; overflow-x: hidden; background: linear-gradient(180deg, #fce4ec 0%, #f8bbd9 50%, #f48fb1 100%); background-attachment: fixed; }
        .floating-hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden; z-index: 0; }
        .heart { position: absolute; font-size: 20px; animation: float-up 6s ease-in infinite; opacity: 0.3; }
        @keyframes float-up { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 10% { opacity: 0.3; } 90% { opacity: 0.3; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }
        .container { position: relative; z-index: 1; max-width: 500px; margin: 0 auto; padding: 20px; min-height: 100vh; }
        .logo { position: absolute; top: 15px; right: 15px; width: 60px; z-index: 10; }
        .logo img { width: 100%; border-radius: 8px; }
        .page { display: none; min-height: 100vh; padding-top: 70px; padding-bottom: 30px; animation: fadeIn 0.5s ease-out; }
        .page.active { display: flex; flex-direction: column; align-items: center; width: 100%; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .landing-title { font-family: 'Playfair Display', serif; font-size: 22px; color: var(--gold); margin-bottom: 10px; text-align: center; }
        .landing-main-title { font-family: 'Playfair Display', serif; font-size: 42px; font-weight: 700; font-style: italic; background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 50%, var(--gold) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 20px; line-height: 1.2; text-align: center; }
        .landing-subtitle { font-size: 16px; color: #666; margin-bottom: 30px; line-height: 1.6; text-align: center; }
        .mascot { width: 180px; height: 180px; margin: 20px 0; animation: bounce 2s ease-in-out infinite; }
        .mascot img { width: 100%; height: 100%; object-fit: contain; border-radius: 15px; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .btn-primary { background: linear-gradient(135deg, var(--pink-dark) 0%, #ad1457 100%); color: white; border: none; padding: 18px 50px; font-size: 18px; font-weight: 600; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4); font-family: 'Prompt', sans-serif; }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 12px 35px rgba(233, 30, 99, 0.5); }
        .progress-bar { width: 100%; height: 8px; background: rgba(255,255,255,0.5); border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--pink-dark), var(--gold)); border-radius: 10px; transition: width 0.5s ease; }
        .question-counter { font-size: 14px; color: #888; margin-bottom: 15px; }
        .quiz-mascot { margin-bottom: 15px; }
        .quiz-mascot img { width: 120px; border-radius: 15px; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(-2deg); } 50% { transform: translateY(-8px) rotate(2deg); } }
        .question-card { background: rgba(255,255,255,0.95); border-radius: 25px; padding: 25px 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.1); width: 100%; max-width: 100%; }
        .question-text { font-size: 16px; font-weight: 500; color: #333; margin-bottom: 20px; line-height: 1.6; text-align: center; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option-btn { background: linear-gradient(135deg, var(--pink-light) 0%, #fce4ec 100%); border: 2px solid transparent; padding: 14px 16px; border-radius: 15px; font-size: 14px; color: #444; cursor: pointer; transition: all 0.3s ease; text-align: left; font-family: 'Prompt', sans-serif; line-height: 1.4; }
        .option-btn:hover { background: linear-gradient(135deg, var(--pink-main) 0%, #f8bbd9 100%); border-color: var(--pink-dark); transform: translateX(5px); }
        .option-btn.selected { background: linear-gradient(135deg, var(--pink-dark) 0%, #ad1457 100%); color: white; }
        .result-image { width: 100%; max-width: 100%; height: auto; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); margin-bottom: 20px; }
        .share-section { text-align: center; width: 100%; max-width: 100%; padding: 0 10px; display: flex; flex-direction: column; align-items: center; }
        .share-title { font-size: 16px; color: #666; margin-bottom: 15px; }
        .share-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 15px; width: 100%; max-width: 320px; }
        .share-btn { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 14px 24px; border-radius: 50px; font-size: 14px; font-weight: 600; cursor: pointer; border: none; font-family: 'Prompt', sans-serif; transition: all 0.3s ease; flex: 1; min-width: 140px; }
        .share-btn.download { background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%); color: #333; }
        .share-btn.instagram { background: linear-gradient(135deg, #833AB4 0%, #FD1D1D 50%, #F77737 100%); color: white; }
        .share-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
        .btn-secondary { background: transparent; border: 2px solid var(--pink-dark); color: var(--pink-dark); padding: 14px 40px; border-radius: 50px; font-size: 15px; font-weight: 600; cursor: pointer; font-family: 'Prompt', sans-serif; transition: all 0.3s ease; width: 100%; max-width: 280px; }
        .btn-secondary:hover { background: var(--pink-dark); color: white; }
        .loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, #fce4ec 0%, #f8bbd9 50%, #f48fb1 100%); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        .loading-overlay.active { display: flex; }
        .loading-mascot { width: 150px; border-radius: 20px; animation: pulse 1.5s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .loading-text { font-size: 18px; color: var(--pink-dark); margin-top: 20px; }
        .loading-hearts { display: flex; gap: 8px; margin-top: 15px; }
        .loading-hearts span { font-size: 24px; animation: heartBeat 1s ease-in-out infinite; }
        .loading-hearts span:nth-child(2) { animation-delay: 0.2s; }
        .loading-hearts span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes heartBeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
        .confetti-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; overflow: hidden; }
        .confetti { position: absolute; width: 10px; height: 10px; animation: confetti-fall 3s linear forwards; }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 200; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 20px; padding: 30px; max-width: 350px; width: 100%; text-align: center; }
        .modal-icon { font-size: 50px; margin-bottom: 15px; }
        .modal-title { color: var(--pink-dark); font-size: 20px; margin-bottom: 15px; }
        .modal-steps { background: var(--pink-light); padding: 15px; border-radius: 12px; text-align: left; margin-bottom: 20px; }
        .modal-steps p { margin: 8px 0; font-size: 14px; color: #333; }
        .modal-buttons { display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%; }
        .modal-btn { width: 100%; max-width: 280px; display: flex; align-items: center; justify-content: center; }
        .modal-close-btn { background: none; border: none; color: #999; padding: 10px 20px; cursor: pointer; font-family: 'Prompt', sans-serif; font-size: 14px; }
        .hidden { display: none !important; }
        
        /* Mobile Responsive */
        @media (max-width: 480px) {
            .container { padding: 12px; }
            .logo { width: 45px; top: 10px; right: 10px; }
            .page { padding-top: 55px; padding-bottom: 25px; }
            .landing-title { font-size: 18px; }
            .landing-main-title { font-size: 34px; }
            .landing-subtitle { font-size: 14px; margin-bottom: 20px; padding: 0 10px; }
            .mascot { width: 140px; height: 140px; margin: 15px 0; }
            .btn-primary { padding: 15px 35px; font-size: 16px; width: 100%; max-width: 280px; }
            .progress-bar { height: 6px; margin-bottom: 12px; }
            .question-counter { font-size: 12px; margin-bottom: 8px; }
            .quiz-mascot { margin-bottom: 10px; }
            .quiz-mascot img { width: 90px; }
            .question-card { padding: 18px 14px; border-radius: 18px; }
            .question-text { font-size: 14px; margin-bottom: 15px; line-height: 1.5; }
            .options { gap: 8px; }
            .option-btn { font-size: 13px; padding: 12px 12px; border-radius: 12px; line-height: 1.4; }
            .result-image { border-radius: 15px; margin-bottom: 15px; }
            .share-section { padding: 0; }
            .share-title { font-size: 14px; margin-bottom: 12px; }
            .share-buttons { gap: 8px; flex-direction: column; align-items: center; }
            .share-btn { padding: 14px 20px; font-size: 14px; width: 100%; max-width: 250px; }
            .btn-secondary { padding: 14px 30px; font-size: 14px; width: 100%; max-width: 250px; margin-top: 10px; }
            .modal { padding: 15px; }
            .modal-content { padding: 22px 18px; border-radius: 18px; }
            .modal-icon { font-size: 40px; margin-bottom: 12px; }
            .modal-title { font-size: 17px; margin-bottom: 12px; }
            .modal-steps { padding: 12px; }
            .modal-steps p { font-size: 13px; margin: 6px 0; }
            .modal-buttons { gap: 8px; }
            .modal-btn { max-width: 100%; padding: 14px 20px; }
            .loading-mascot { width: 110px; }
            .loading-text { font-size: 15px; margin-top: 15px; }
            .loading-hearts span { font-size: 20px; }
        }
        
        @media (max-width: 360px) {
            .container { padding: 10px; }
            .logo { width: 40px; }
            .page { padding-top: 50px; }
            .landing-title { font-size: 16px; }
            .landing-main-title { font-size: 28px; }
            .landing-subtitle { font-size: 13px; }
            .mascot { width: 120px; height: 120px; margin: 12px 0; }
            .btn-primary { padding: 14px 30px; font-size: 15px; }
            .quiz-mascot img { width: 75px; }
            .question-card { padding: 15px 12px; }
            .question-text { font-size: 13px; }
            .option-btn { font-size: 12px; padding: 10px 10px; }
            .share-btn { padding: 12px 18px; font-size: 13px; }
            .btn-secondary { padding: 12px 25px; font-size: 13px; }
            .modal-content { padding: 18px 15px; }
            .modal-steps p { font-size: 12px; }
        }
        
        @media (max-width: 320px) {
            .landing-main-title { font-size: 24px; }
            .landing-subtitle { font-size: 12px; }
            .mascot { width: 100px; height: 100px; }
            .question-text { font-size: 12px; }
            .option-btn { font-size: 11px; padding: 9px 8px; }
        }
        
        /* Landscape mode on mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .page { padding-top: 45px; min-height: auto; }
            .landing-page.active { justify-content: flex-start; }
            .mascot { width: 80px; height: 80px; margin: 10px 0; }
            .landing-main-title { font-size: 24px; margin-bottom: 10px; }
            .landing-subtitle { font-size: 12px; margin-bottom: 15px; }
            .btn-primary { padding: 12px 30px; font-size: 14px; }
            .quiz-mascot img { width: 60px; }
            .question-card { padding: 12px; }
            .question-text { font-size: 13px; margin-bottom: 10px; }
            .option-btn { padding: 8px 10px; font-size: 12px; }
            .loading-mascot { width: 80px; }
        }
        
        /* Fix for notch/safe area on newer iPhones */
        @supports (padding-top: env(safe-area-inset-top)) {
            .container { 
                padding-top: calc(15px + env(safe-area-inset-top)); 
                padding-bottom: calc(15px + env(safe-area-inset-bottom));
                padding-left: calc(12px + env(safe-area-inset-left));
                padding-right: calc(12px + env(safe-area-inset-right));
            }
            .modal {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
            }
        }
        
        /* Prevent text selection on buttons for better mobile UX */
        button { 
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }
        
        /* Smooth scrolling */
        html { scroll-behavior: smooth; }
        
        /* Better touch targets for accessibility */
        @media (hover: none) and (pointer: coarse) {
            .option-btn { min-height: 48px; }
            .share-btn { min-height: 48px; }
            .btn-primary { min-height: 50px; }
            .btn-secondary { min-height: 48px; }
        }
        
        /* Active states for mobile */
        .btn-primary:active { transform: scale(0.98); }
        .btn-secondary:active { transform: scale(0.98); }
        .share-btn:active { transform: scale(0.98); }
        .option-btn:active { transform: scale(0.98); background: linear-gradient(135deg, var(--pink-main) 0%, #f8bbd9 100%); }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <div class="loading-overlay" id="loadingOverlay">
        <img src="images/mascot-3.jpeg" alt="Loading" class="loading-mascot">
        <p class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Love Language ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...</p>
        <div class="loading-hearts">
            <span>üíï</span><span>üíï</span><span>üíï</span>
        </div>
    </div>
    
    <div class="confetti-container" id="confettiContainer"></div>
    
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <div class="modal-icon">üì∏üíï</div>
            <h3 class="modal-title">Share ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡πÄ‡∏•‡∏¢!</h3>
            <div class="modal-steps">
                <p><b>1.</b> ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ" ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
                <p><b>2.</b> ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"</p>
                <p><b>3.</b> ‡πÄ‡∏õ‡∏¥‡∏î Instagram ‡∏™‡∏£‡πâ‡∏≤‡∏á Story</p>
                <p><b>4.</b> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ Share ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</p>
            </div>
            <div class="modal-buttons">
                <button class="btn-primary modal-btn" onclick="saveImage()">üì• ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ</button>
                <button class="share-btn instagram modal-btn" onclick="openIG()">üì∑ ‡πÄ‡∏õ‡∏¥‡∏î Instagram</button>
                <button class="modal-close-btn" onclick="closeModal()">‡∏õ‡∏¥‡∏î</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="logo">
            <img src="images/logo.png" alt="HAAB">
        </div>

        <!-- Landing Page -->
        <div class="page active" id="landingPage">
            <p class="landing-title">My Love Language is...</p>
            <h1 class="landing-main-title">The 5 Love<br>Languages</h1>
            <p class="landing-subtitle">
                ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Love Language ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì!<br>
                ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô<br>
                ‡πÅ‡∏•‡πâ‡∏ß Share ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à üíï
            </p>
            <div class="mascot">
                <img src="images/mascot-1.jpeg" alt="HAAB Mascot">
            </div>
            <button class="btn-primary" onclick="startQuiz()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        </div>

        <!-- Quiz Page -->
        <div class="page" id="quizPage">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width:0%"></div>
            </div>
            <div class="question-counter" id="questionCounter">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà 1 / 7</div>
            <div class="quiz-mascot">
                <img src="images/mascot-2.jpeg" alt="Mascot" id="quizMascotImg">
            </div>
            <div class="question-card">
                <p class="question-text" id="questionText"></p>
                <div class="options" id="optionsContainer"></div>
            </div>
        </div>

        <!-- Result Page -->
        <div class="page" id="resultPage">
            <img src="" alt="Your Love Language Result" class="result-image" id="resultImage">
            <div class="share-section">
                <p class="share-title">Share ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏≠‡∏Å‡∏£‡∏π‡πâ‡πÄ‡∏•‡∏¢! üíï</p>
                <div class="share-buttons">
                    <button class="share-btn download" onclick="saveImage()">üì• ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ</button>
                    <button class="share-btn instagram" onclick="showShareModal()">üì∏ Share IG Story</button>
                </div>
                <button class="btn-secondary" onclick="retryQuiz()">üîÑ ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== IMAGE PATHS ====================
        // ‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ
        const IMAGES = {
            logo: "images/logo.png",
            mascot1: "images/mascot-1.jpeg",
            mascot2: "images/mascot-2.jpeg",
            mascot3: "images/mascot-3.jpeg",
            mascot4: "images/mascot-4.jpeg",
            resultA: "images/A.png",
            resultB: "images/B.png",
            resultC: "images/C.png",
            resultD: "images/D.png",
            resultE: "images/E.png"
        };
        // ====================================================

        const questions = [
            { q: "1. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÅ‡∏¢‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏•‡πâ‡∏≤ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠?", opts: [
                ["‡πÄ‡∏Ç‡∏≤‡∏°‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á‡∏Ñ‡∏∏‡∏ì‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠", "A"],
                ["‡πÄ‡∏Ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ", "B"],
                ["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏∏‡∏ì", "C"],
                ["‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡∏õ‡∏•‡∏≠‡∏ö‡πÇ‡∏¢‡∏ô‡∏ß‡πà‡∏≤ \"‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞ ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß\"", "D"],
                ["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏Å‡∏≠‡∏î‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡∏ô‡πÜ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏π‡∏î‡∏≠‡∏∞‡πÑ‡∏£", "E"]
            ]},
            { q: "2. ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ñ‡πâ‡∏≤...", opts: [
                ["‡πÑ‡∏î‡πâ‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡πÜ ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô", "A"],
                ["‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏ö‡πà‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ", "B"],
                ["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏´‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ó‡∏≤‡∏ô", "C"],
                ["‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ã‡∏∂‡πâ‡∏á‡πÜ", "D"],
                ["‡πÑ‡∏î‡πâ‡∏ô‡∏≠‡∏ô‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏ß‡∏µ‡∏ó‡∏Å‡∏±‡∏ô‡∏™‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏á", "E"]
            ]},
            { q: "3. ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å \"‡πÇ‡∏Å‡∏£‡∏ò/‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏à\" ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ü‡∏ô...", opts: [
                ["‡∏™‡∏ô‡πÉ‡∏à‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏°/‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô/‡∏á‡∏≤‡∏ô ‡∏à‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì", "A"],
                ["‡∏•‡∏∑‡∏°‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏ù‡∏≤‡∏Å", "B"],
                ["‡πÄ‡∏≠‡∏≤‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö ‡πÑ‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏¢‡∏¥‡∏ö‡∏à‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢ ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß", "C"],
                ["‡∏û‡∏π‡∏î‡∏à‡∏≤‡πÅ‡∏£‡∏á‡πÜ ‡πÉ‡∏™‡πà‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏∏‡∏ì", "D"],
                ["‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡πà‡∏≤‡∏á‡πÜ ‡∏õ‡∏±‡∏î‡∏°‡∏∑‡∏≠‡∏≠‡∏≠‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏ó‡πà‡∏≤‡∏£‡∏±‡∏á‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™", "E"]
            ]},
            { q: "4. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏á‡πâ‡∏≠ (‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏î‡∏µ) ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏à‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", opts: [
                ["‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏≤‡∏ä‡∏ß‡∏ô‡∏Ñ‡∏∏‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì", "A"],
                ["‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏ô‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏°‡∏≤‡∏á‡πâ‡∏≠", "B"],
                ["‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏≤‡∏•‡∏∏‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡∏î‡∏µ‡πÜ ‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÉ‡∏´‡πâ", "C"],
                ["‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ö‡∏≠‡∏Å‡∏£‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì", "D"],
                ["‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏≤‡∏î‡∏∂‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏Å‡∏≠‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≠‡∏°‡πÅ‡∏Å‡πâ‡∏°", "E"]
            ]},
            { q: "5. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏≠?", opts: [
                ["‡πÑ‡∏î‡πâ‡∏ó‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏¢‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠‡∏°‡∏≤", "A"],
                ["‡∏°‡∏µ‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏ô‡πâ‡∏≠‡∏¢‡πÜ ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤", "B"],
                ["‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Ñ‡∏≠‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÉ‡∏´‡πâ, ‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÉ‡∏´‡πâ)", "C"],
                ["‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ \"‡∏£‡∏±‡∏Å‡∏ô‡∏∞\" ‡∏´‡∏£‡∏∑‡∏≠ \"‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á\" ‡∏ö‡πà‡∏≠‡∏¢‡πÜ", "D"],
                ["‡πÑ‡∏î‡πâ‡∏à‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ï‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡πâ‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏ö‡∏µ‡∏¢‡∏î‡∏Å‡∏±‡∏ô‡∏ö‡∏ô‡∏£‡∏ñ", "E"]
            ]},
            { q: "6. ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤ \"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏î‡∏µ\" ‡∏ß‡∏±‡∏î‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô?", opts: [
                ["‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ô ‡πÑ‡∏°‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏´‡∏á‡∏≤", "A"],
                ["‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏™‡πà‡πÉ‡∏à ‡∏ó‡∏µ‡πà‡∏à‡∏î‡∏à‡∏≥‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ", "B"],
                ["‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏π‡πà‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏±‡∏ô", "C"],
                ["‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠", "D"],
                ["‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÑ‡∏î‡πâ", "E"]
            ]},
            { q: "7. ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏Ñ‡∏∏‡∏ì‡∏Ç‡∏≤‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢?", opts: [
                ["‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à", "A"],
                ["‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ó‡∏ô‡πÉ‡∏à", "B"],
                ["‡∏Å‡∏≤‡∏£‡∏ã‡∏±‡∏û‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠", "C"],
                ["‡∏Ñ‡∏≥‡∏ä‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö", "D"],
                ["‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÅ‡∏ï‡∏∞‡∏ï‡∏±‡∏ß", "E"]
            ]}
        ];

        const resultNames = {
            A: "Quality Time",
            B: "Receiving Gifts", 
            C: "Acts of Service",
            D: "Words of Affirmation",
            E: "Physical Touch"
        };

        let currentQ = 0;
        let scores = { A: 0, B: 0, C: 0, D: 0, E: 0 };
        let result = "A";

        // Create floating hearts
        function createHearts() {
            const c = document.getElementById('floatingHearts');
            const hearts = ['üíï', 'üíó', 'üíñ', 'üíù', '‚ù§Ô∏è', 'ü©∑'];
            for (let i = 0; i < 12; i++) {
                const h = document.createElement('span');
                h.className = 'heart';
                h.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                h.style.left = Math.random() * 100 + '%';
                h.style.animationDelay = Math.random() * 6 + 's';
                h.style.animationDuration = (4 + Math.random() * 4) + 's';
                c.appendChild(h);
            }
        }

        // Show page
        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // Start quiz
        function startQuiz() {
            currentQ = 0;
            scores = { A: 0, B: 0, C: 0, D: 0, E: 0 };
            showPage('quizPage');
            showQuestion();
        }

        // Show question
        function showQuestion() {
            const q = questions[currentQ];
            document.getElementById('questionText').textContent = q.q;
            document.getElementById('questionCounter').textContent = '‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà ' + (currentQ + 1) + ' / ' + questions.length;
            document.getElementById('progressFill').style.width = (currentQ / questions.length * 100) + '%';
            
            const opts = document.getElementById('optionsContainer');
            opts.innerHTML = '';
            
            // Shuffle options
            const shuffled = [...q.opts].sort(() => Math.random() - 0.5);
            shuffled.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt[0];
                btn.onclick = () => selectOption(opt[1], btn);
                opts.appendChild(btn);
            });
        }

        // Select option
        function selectOption(val, btn) {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            scores[val]++;
            
            setTimeout(() => {
                currentQ++;
                if (currentQ < questions.length) {
                    showQuestion();
                } else {
                    showLoading();
                }
            }, 300);
        }

        // Show loading
        function showLoading() {
            document.getElementById('quizPage').classList.remove('active');
            document.getElementById('loadingOverlay').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('active');
                showResult();
            }, 2500);
        }

        // Get result
        function getResult() {
            let max = 0;
            let res = 'A';
            for (const [k, v] of Object.entries(scores)) {
                if (v > max) { max = v; res = k; }
            }
            return res;
        }

        // Show result
        function showResult() {
            result = getResult();
            const img = document.getElementById('resultImage');
            img.src = IMAGES['result' + result];
            showPage('resultPage');
            createConfetti();
        }

        // Create confetti
        function createConfetti() {
            const c = document.getElementById('confettiContainer');
            c.innerHTML = '';
            const colors = ['#e91e63', '#f8bbd9', '#fce4ec', '#d4af37', '#f0d77c', '#ff4081'];
            for (let i = 0; i < 50; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + '%';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.animationDelay = Math.random() * 2 + 's';
                conf.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                c.appendChild(conf);
            }
        }

        // Save image - opens in new tab for iOS/Safari compatibility
        function saveImage() {
            const img = document.getElementById('resultImage');
            const w = window.open('', '_blank');
            w.document.write(`
                <html>
                <head>
                    <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ - HAAB Love Language</title>
                    <meta name="viewport" content="width=device-width, initial-scale=1">
                    <style>
                        body { margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background: #fce4ec; font-family: sans-serif; padding: 20px; box-sizing: border-box; }
                        img { max-width: 100%; height: auto; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
                        p { color: #e91e63; margin-top: 20px; font-size: 16px; text-align: center; }
                    </style>
                </head>
                <body>
                    <img src="${img.src}" alt="Love Language Result">
                    <p>üì± ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"</p>
                </body>
                </html>
            `);
            w.document.close();
        }

        // Show share modal
        function showShareModal() {
            document.getElementById('shareModal').classList.add('active');
        }

        // Close modal
        function closeModal() {
            document.getElementById('shareModal').classList.remove('active');
        }

        // Open Instagram
        function openIG() {
            window.location.href = 'instagram://story-camera';
            setTimeout(() => {
                window.open('https://www.instagram.com/', '_blank');
            }, 2000);
        }

        // Retry quiz
        function retryQuiz() {
            document.getElementById('confettiContainer').innerHTML = '';
            showPage('landingPage');
        }

        // Init
        document.addEventListener('DOMContentLoaded', createHearts);
    </script>
</body>
</html>
